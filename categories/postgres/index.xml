<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Postgres on Clint Berry</title>
    <link>http://localhost:1313/categories/postgres/</link>
    <description>Recent content in Postgres on Clint Berry</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 01 Jul 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/postgres/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Postgres Master-Master Replication with BDR</title>
      <link>http://localhost:1313/2015/postgres-master-master-replication-bdr/</link>
      <pubDate>Wed, 01 Jul 2015 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/2015/postgres-master-master-replication-bdr/</guid>
      <description>

&lt;p&gt;PostgreSQL is an absolutely amazing relational database. And with its newer JSON data type, it can even function as a decent document store with non-structured data, while still keeping full transaction support and all the other great things you would expect from a good relational database.&lt;/p&gt;

&lt;p&gt;But one thing that has been lacking with PostgreSQL is replication, so when I heard that Postgres was enhancing its core with &lt;a href=&#34;http://2ndquadrant.com/en/resources/bdr/&#34; title=&#34;BDR&#34; target=&#34;_blank&#34;&gt;BDR (bi-directional replication)&lt;/a&gt;, I was super excited. This is a tutorial to get BDR setup with a &lt;a href=&#34;http://en.wikipedia.org/wiki/Multi-master_replication&#34; title=&#34;Multi-Mater Replication&#34; target=&#34;_blank&#34;&gt;master-master&lt;/a&gt; architecture on two servers with Ubuntu 14.04.&lt;/p&gt;

&lt;p&gt;I have provided a github repo here with a Vagrant file that will spin up two virtual machines for you. It will also install Postgres with the BDR plugin/patch and connect the two servers for replication, but here are the step by step instructions to get you going on your own boxes.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;First, you need two Ubuntu 14.04 servers.&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Add the PostgresBDR and BDR plugin apt repository
Create /etc/apt/sources.list.d/pgdg.list and add this line:
&lt;pre&gt;&lt;/p&gt;

&lt;h1 id=&#34;etc-apt-sources-list-d-pgdg-list:04a24b4b3d8b83ef02511d8756b77e22&#34;&gt;/etc/apt/sources.list.d/pgdg.list&lt;/h1&gt;

&lt;p&gt;deb &lt;a href=&#34;http://apt.postgresql.org/pub/repos/apt/&#34;&gt;http://apt.postgresql.org/pub/repos/apt/&lt;/a&gt; trusty-pgdg main
&lt;/pre&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Run this command to add the key:&lt;/p&gt;

&lt;pre language=&#34;bash&#34;&gt;
$ wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
&lt;/pre&gt;

&lt;p&gt;Next create /etc/apt/sources.list.d/2ndquadrant.list and add this line:
deb &lt;a href=&#34;http://packages.2ndquadrant.com/bdr/apt/&#34;&gt;http://packages.2ndquadrant.com/bdr/apt/&lt;/a&gt; trusty-2ndquadrant main&lt;/p&gt;

&lt;p&gt;Then run this command to add the 2nd quadrant key:
wget &amp;ndash;quiet -O - &lt;a href=&#34;http://packages.2ndquadrant.com/bdr/apt/AA7A6805.asc&#34;&gt;http://packages.2ndquadrant.com/bdr/apt/AA7A6805.asc&lt;/a&gt; | sudo apt-key add -&lt;/p&gt;

&lt;p&gt;Now update your apt repos and install postgres with BDR enabled:&lt;/p&gt;

&lt;p&gt;sudo apt-get update
sudo apt-get install postgresql-bdr-9.4
sudo apt-get install postgresql-bdr-9.4-bdr-plugin
sudo apt-get install postgresql-bdr-*&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>